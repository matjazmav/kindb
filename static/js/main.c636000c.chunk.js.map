{"version":3,"sources":["pages/Home.js","pages/contribute/Step1.js","components/Camera.js","pages/contribute/Step2.js","pages/contribute/Step3.js","pages/Contribute.js","pages/Database.js","pages/About.js","App.js","reportWebVitals.js","index.js"],"names":["Home","Step1","Camera","webcamRef","React","useRef","cropperRef","useState","isModelLoaded","setModelLoaded","rawImageSrc","setRawImageSrc","croppedImageSrc","setCroppedImageSrc","detection","setDetection","capture","useCallback","current","getScreenshot","crop","getCroppedCanvas","toDataURL","useEffect","faceapi","process","then","console","log","catch","e","document","getElementById","d","left","box","top","width","height","setCropBoxData","Math","max","className","audio","mirrored","screenshotFormat","videoConstraints","facingMode","ref","onClick","src","id","style","initialAspectRatio","guides","onInitialized","cropper","dragMode","movable","rotatable","scalable","zoomable","JSON","stringify","Step2","Step3","Contribute","Nav","fill","Item","Link","as","to","path","Database","About","App","Navbar","bg","expand","Container","Brand","Toggle","aria-controls","Collapse","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.c636000c.chunk.js","sourcesContent":["\nconst Home = () => {\n  return (\n    <section>\n      <h1>CommunityFaceKinDB</h1>\n      <p>\n        Database of facial images colleced by community annotated with kinship attributes.\n      </p>\n    </section>\n  );\n}\n\nexport default Home;","const Step1 = () => {\n  return (\n    <section>\n      <h1>Step 1</h1>\n      <p>\n        Zakaj je ta anketa,\n        Kratka navodila,\n        poudari se anonimnost...\n      </p>\n    </section>\n  );\n};\n\nexport default Step1;","import Webcam from \"react-webcam\";\nimport React from 'react';\nimport Cropper from 'react-cropper';\nimport 'cropperjs/dist/cropper.css';\nimport * as faceapi from 'face-api.js';\n\nconst Camera = () => {\n\n  const webcamRef = React.useRef(null);\n  const rawImageRef = React.useRef(null);\n  const cropperRef = React.useRef(null);\n\n  const [isModelLoaded, setModelLoaded] = React.useState(false);\n  const [rawImageSrc, setRawImageSrc] = React.useState(null);\n  const [croppedImageSrc, setCroppedImageSrc] = React.useState(null);\n  const [detection, setDetection] = React.useState(null);\n\n  const capture = React.useCallback(\n    () => {\n      setRawImageSrc(webcamRef.current.getScreenshot());\n    },\n    [webcamRef]\n  );\n\n  const crop = React.useCallback(\n    () => {\n      setCroppedImageSrc(cropperRef.current.getCroppedCanvas().toDataURL());\n    },\n    [cropperRef]\n  );\n\n  const onCropperInit = (cropper) => {\n    cropperRef.current = cropper;\n  };\n\n  React.useEffect(() => {\n    if (isModelLoaded) return;\n    faceapi.loadSsdMobilenetv1Model(process.env.PUBLIC_URL + '/models')\n      .then(() => {\n        console.log(\"loaded\");\n        setModelLoaded(true);\n      })\n      .catch((e) => {\n        console.log(\"error loading\");\n        console.log(e);\n      });\n  }, []);\n\n  React.useEffect(() => {\n    if (!isModelLoaded) return;\n    console.log(\"detecting...\")\n    faceapi.detectSingleFace(document.getElementById(\"rawImageSrc\"))\n      .then((d) => {\n        console.log(d);\n        setDetection({\n          left: d.box.left,\n          top: d.box.top,\n          width: d.box.width,\n          height: d.box.height,\n        });\n      })\n      .catch((e) => {\n        console.log(\"error detecting\");\n        console.log(e);\n      });\n  }, [rawImageSrc]);\n\n  React.useEffect(() => {\n    if(!detection) return;\n    cropperRef.current.setCropBoxData({\n      ...detection,\n      height: detection.height*1.5,\n      top: Math.max(0, detection.top-(detection.height*0.5))\n    });\n  }, [cropperRef, detection]);\n\n  return (\n    <div className=\"image-capture\">\n      <Webcam\n        audio={false}\n        mirrored={true}\n        screenshotFormat=\"image/jpeg\"\n        videoConstraints={{\n          facingMode: \"user\"\n        }}\n        ref={webcamRef} />\n      <button onClick={capture}>Capture photo</button>\n      <img src={rawImageSrc} id=\"rawImageSrc\"/>\n      <Cropper\n                src={rawImageSrc}\n                style={{height: 400, width: '100%'}}\n                initialAspectRatio={1}\n                guides={false}\n                crop={crop}\n                onInitialized={onCropperInit}\n                dragMode=\"crop\"\n                movable={false}\n                rotatable={false}\n                scalable={false}\n                zoomable={false}\n            />\n      <img src={croppedImageSrc} />\n      <pre><code>{JSON.stringify(detection)}</code></pre>\n    </div>\n  );\n}\n\nexport default Camera;\n","import Camera from \"../../components/Camera\"\n\nconst Step2 = () => {\n  return (\n    <section>\n      <h1>Step 2</h1>\n      <Camera />\n    </section>\n  );\n};\n\nexport default Step2;","const Step3 = () => {\n  return (\n    <section>\n      <h1>Step 3</h1>\n      <p>\n        Strinjaj se z obdelavo podatkov, povdari anonimnost, zahvali se\n      </p>\n    </section>\n  );\n};\n\nexport default Step3;","import React from \"react\";\n// import {\n//   useRouteMatch,\n//   Switch,\n//   Route,\n//   Link\n// } from \"react-router-dom\";\nimport { Router, Link } from \"@reach/router\";\n\nimport Step1 from \"./contribute/Step1\"\nimport Step2 from \"./contribute/Step2\"\nimport Step3 from \"./contribute/Step3\"\n\nimport {\n  Nav\n} from 'react-bootstrap';\n\nconst Contribute = () => {\n  // const route = useRouteMatch();\n\n  return (\n    <section>\n      <Nav fill className=\"justify-content-center\">\n        <Nav.Item>\n          <Nav.Link as={Link} to=\"1\">Intro</Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link as={Link} to=\"2\">Upload</Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link as={Link} to=\"3\" >Finish</Nav.Link>\n        </Nav.Item>\n      </Nav>\n\n      <Router>\n        <Step1 path=\"1\" />\n        <Step2 path=\"2\" />\n        <Step3 path=\"3\" />\n      </Router>\n\n      {/* <Switch>\n        <Route exact path={`${route.url}/1`}>\n          <Step1 />\n        </Route>\n        <Route exact path={`${route.url}/2`}>\n          <Step2 />\n        </Route>\n        <Route exact path={`${route.url}/3`}>\n          <Step3 />\n        </Route>\n      </Switch> */}\n\n    </section>\n  );\n}\n\nexport default Contribute;","\nconst Database = () => {\n  return (\n    <section>\n      <h1>Database</h1>\n      <p>\n        info about database, attributes, annotations, number of families, number of faces, ...\n      </p>\n    </section>\n  );\n}\n\nexport default Database;","\nconst About = () => {\n  return (\n    <section>\n      <h1>About</h1>\n      <p>\n        about, cite, ...\n      </p>\n    </section>\n  );\n}\n\nexport default About;","import React from \"react\";\n// import {\n//   BrowserRouter as Router,\n//   Switch,\n//   Route,\n//   Link\n// } from \"react-router-dom\";\nimport { Router, Link } from \"@reach/router\"\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {\n  Navbar,\n  Nav,\n  Container\n} from 'react-bootstrap';\n\nimport Home from \"./pages/Home\"\nimport Contribute from \"./pages/Contribute\"\nimport Database from \"./pages/Database\"\nimport About from \"./pages/About\"\n\nconst App = () => {\n  return (\n    <section>\n      <Navbar bg=\"light\" expand=\"lg\">\n        <Container>\n          <Navbar.Brand as={Link} to=\"/\" >CommunityFaceKinDB</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n          <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"mr-auto\">\n              <Nav.Link as={Link} to=\"/\" >Home</Nav.Link>\n              <Nav.Link as={Link} to=\"contribute\">Contribute</Nav.Link>\n              <Nav.Link as={Link} to=\"database\">Database</Nav.Link>\n              <Nav.Link as={Link} to=\"about\">About</Nav.Link>\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n\n      <Container>\n        <Router>\n          <Home path=\"/\"/>\n          <Contribute path=\"contribute/*\" />\n          <Database path=\"database\" />\n          <About path=\"about\" />\n          {/* <NotFound default /> */}\n        </Router>\n\n        {/* <Switch>\n          <Route strict path=\"/contribute\">\n            <Contribute />\n          </Route>\n          <Route exact path=\"/database\">\n            <Database />\n          </Route>\n          <Route exact path=\"/about\">\n            <About />\n          </Route>\n          <Route exact path=\"/\">\n            <Home />\n          </Route>\n        </Switch> */}\n      </Container>\n    </section>\n  );\n};\n\nconst NotFound = () => (<h1>404</h1>);\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}